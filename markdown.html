<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Titre du document</title>
    <!-- Copyright © 2014 Monotype Imaging Inc. All rights reserved -->
    <link href="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/css/orange-helvetica.min.css" rel="stylesheet" integrity="sha384-A0Qk1uKfS1i83/YuU13i2nx5pk79PkIfNFOVzTcjCMPGKIDj9Lqx9lJmV7cdBVQZ" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/css/boosted.min.css" rel="stylesheet" integrity="sha384-laZ3JUZ5Ln2YqhfBvadDpNyBo7w5qmWaRnnXuRwNhJeTEFuSdGbzl4ZGHAEnTozR" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/a11y-dark.min.css" rel="stylesheet">
    <link href="assets/css/slayder.css" rel="stylesheet">
    <link rel="preload" href="/assets/images/slayder-sprites.svg" as="image" type="image/svg+xml">
  </head>
  <body>
    <header role="banner" class="d-flex justify-content-between">
      <h1 aria-current="location">Formation</h1>
      <nav class="btn-group" role="navigation" aria-label="Navigation générale">
        <div id="summary" class="dropdown">
          <button class="btn btn-dropdown dropdown-toggle" data-bs-toggle="dropdown" type="button" aria-expanded="false">Sommaire</button>
          <ul class="dropdown-menu"></ul>
        </div>
        <div class="dropdown d-none d-md-block">
          <button class="btn btn-dropdown dropdown-toggle" id="bd-theme" data-bs-toggle="dropdown" type="button" aria-expanded="false">
            <svg class="theme-icon-active" width="1.25em" height="1.25em" aria-hidden="true" focusable="false"><use xlink:href="assets/images/slayder-sprites.svg#ui-auto-mode"></use></svg>
            <span class="d-lg-none ms-2" id="bd-theme-text">Mode</span>
          </button>
          <ul class="dropdown-menu">
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="me-2" width="1em" height="1em" aria-hidden="true" focusable="false"><use xlink:href="assets/images/slayder-sprites.svg#ui-light-mode"></use></svg>
                Clair
                <svg class="ms-auto d-none" width="1em" height="1em"><use xlink:href="assets/images/slayder-sprites.svg#check"></use></svg>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="me-2" width="1em" height="1em" aria-hidden="true" focusable="false"><use xlink:href="assets/images/slayder-sprites.svg#ui-dark-mode"></use></svg>
                Sombre
                <svg class="ms-auto d-none" width="1em" height="1em"><use xlink:href="assets/images/slayder-sprites.svg#check"></use></svg>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="me-2" width="1em" height="1em"><use xlink:href="assets/images/slayder-sprites.svg#ui-auto-mode"></use></svg>
                Auto
                <svg class="ms-auto d-none" width="1em" height="1em"><use xlink:href="assets/images/slayder-sprites.svg#check"></use></svg>
              </button>
            </li>
          </ul>
        </div>
        <div class="d-none d-md-block">
          <button id="fullscreen" class="btn btn-icon" type="button" aria-label="Plein écran">
            <svg width="1.25em" height="1.25em" aria-hidden="true" focusable="false"><use xlink:href="assets/images/slayder-sprites.svg#full-screen"></use></svg>
          </button>
        </div>
      </nav>
    </header>
    <main role="main" id="content"></main>
    <footer>
      <nav id="pagination" aria-label="Pagination" class="d-none d-md-block">
        <ul class="pagination justify-content-center"></ul>
      </nav>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/boosted@5.3.3/dist/js/boosted.bundle.min.js" integrity="sha384-3RoJImQ+Yz4jAyP6xW29kJhqJOE3rdjuu9wkNycjCuDnGAtC/crm79mLcwj1w2o/" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>
    <script src="assets/js/colorModeToggler.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
(() => {
  'use strict'
  
  fetch("rediger-accessible.md")
    .then(response => response.text())
    .then(markdown => {
      const renderer = {
        heading({ tokens, depth }) {
          return `<h${depth} ${depth === 1 || depth === 2 ? `class="display-${depth}"` : ''}>${this.parser.parseInline(tokens)}</h${depth}>`;
        },
        strong({ tokens }) {
          return `<strong class="text-primary">${this.parser.parseInline(tokens)}</strong>`;
        }
      };

      const section = {
        name: 'section',
        level: 'block',
        start(src) {
          return src.match(/^::: /);
        },
        tokenizer(src) {
          const rule = /^::: (\S+)\s?(\S*?)\n([\s\S]*?)(?=:::|$)/;
          const match = rule.exec(src);

          if (match) {
            return {
              type: 'section',
              raw: match[0],
              id: match[1],
              special: match[2],
              content: match[3].trim()
            };
          }
        },
        renderer(token) {
          return `<section id="${token.id}" ${token.special ? 'class="d-flex align-items-center"' : ''}><div>${marked.parse(token.content)}</div></section>`;
        }
      };
      marked.use({ breaks: true, renderer, extensions: [section] });
      document.getElementById("content").innerHTML = marked.parse(markdown);

      // Interface lang
      function i18n(key) {
        const translations = {
          en: {
            training: "Training",
            previous: "Previous",
            next: "Next"
          },
          fr: {
            training: "Formation",
            previous: "Précédente",
            next: "Suivante"
          }
        };
        return translations[document.documentElement.lang || 'en'][key] || key;
      }

      // Observe section change
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            let main_title = document.querySelector('#cover h1');
            let section_title = entry.target.querySelector('h1') ? null : (function() {
              for (let section = entry.target.previousElementSibling; section; section = section.previousElementSibling) {
                if (section.querySelector('h1')) return section.querySelector('h1');
              }
            })();
            
            // Change URL
            if (location.hash !== `#${entry.target.id}`) history.replaceState(null, "", `#${entry.target.id}`);
            
            // Change H1
            document.querySelector('h1').innerText = entry.target.id === "cover" ? i18n('training') : (section_title ? section_title.innerText : main_title.innerText);
            
            // Change title
            document.title = `${section_title ? `${main_title.innerText} - ${section_title.innerText}` : (entry.target.id === "cover") ? i18n('training') : main_title.innerText} - ${entry.target.querySelector('h1, h2, h3, h4, h5, h6')?.innerText || entry.target.id}`;

            // Summary buils
            document.querySelector('#summary .dropdown-menu').innerHTML = [...document.querySelectorAll('section h1')].map(heading => `
              <li ${heading === (section_title || entry.target.querySelector('h1')) ? 'class="active"' : ''}><a class="dropdown-item d-flex align-items-center" href="#${heading.closest('section').id}">${heading.textContent}<svg class="ms-auto d-none" width="1em" height="1em"><use xlink:href="assets/images/slayder-sprites.svg#check"></use></svg></a></li>
            `).join('');

            // Pagination buid
            const slides = [...document.querySelectorAll('section')].map(slide => slide.id);
            const currentIndex = slides.indexOf(entry.target.id);
            document.querySelector('#pagination .pagination').innerHTML = `
              <li class="page-item ${currentIndex === 0 ? 'disabled' : ''}">
                <a ${currentIndex > 0 ? `href="#${slides[currentIndex - 1]}"` : ''} class="page-link">${i18n('previous')}</a>
              </li>
              ${slides.map((slide, index) => `
                <li class="page-item ${currentIndex === index ? 'active' : ''}" ${currentIndex === index ? 'aria-current="page"' : ''}>
                  <a href="#${slide}" class="page-link">${index + 1}</a>
                </li>
              `).join('')}
              <li class="page-item ${currentIndex === slides.length - 1 ? 'disabled' : ''}">
                <a ${currentIndex < slides.length - 1 ? `href="#${slides[currentIndex + 1]}"` : ''} class="page-link">${i18n('next')}</a>
              </li>
            `;
          }
        });
      }, { threshold: .5 });
      document.querySelectorAll('section').forEach(section => observer.observe(section));

      // Fullscreen enable
      document.querySelector('#fullscreen').addEventListener('click', (event) => {
        if (document.fullscreenElement) {
          document.exitFullscreen();
          return;
        }
        document.body.requestFullscreen();
      });

      // Popovers init
      const popoverList = [...document.querySelectorAll('[data-bs-toggle="popover"]')].map(popoverTriggerEl => new boosted.Popover(popoverTriggerEl));

      // Quiz validation
      document.querySelectorAll('.quiz').forEach(form => {
        form.addEventListener('submit', event => {
          const validateInput = () => {
            form.querySelectorAll('input').forEach(input => {
              input.classList.toggle('valid', input.checked === !!input.parentElement.querySelector(".badge"));
              input.classList.toggle('invalid', input.checked !== !!input.parentElement.querySelector(".badge"));
            });
          };

          validateInput();
          form.addEventListener('change', () => validateInput());
          event.preventDefault();
          event.stopPropagation();
          form.classList.add('validated');
          form.querySelector("button[type='submit']").disabled = true;
        }, false);
      });

      // Highlight code
      hljs.highlightAll();
    })
    .catch(error => { console.log(error) });
})()
    </script>
  </body>
</html>
